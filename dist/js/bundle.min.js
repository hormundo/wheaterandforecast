const KEY="1dc82a28b0407cd1aab188ddebb887d6",URL="http://api.openweathermap.org/data/2.5/forecast";let lat,lon;document.addEventListener("DOMContentLoaded",t=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){lat=t.coords.latitude,lon=t.coords.longitude,getCity(lat,lon)}),(function(t){console.log("Ubicación no activada")}))});const forecastCity=t=>{const e={dia:"",icon:"",desc:"",mintemp:"",maxtemp:""};for(let n=1;n<6;n++){let o=t.list[n].dt_txt.split(" ");e.dia=o[0],e.icon=t.list[0].weather[0].icon,e.desc=t.list[0].weather[0].description,e.mintemp=Math.round(t.list[0].main.temp_min),e.maxtemp=Math.round(t.list[0].main.temp_max)}};async function getCity(t,e){try{let n=await fetch(`${URL}?lat=${t}&lon=${e}&lang=es&units=metric&appid=${KEY}`),o=await n.json();document.querySelector(".current-wheater img").src=`../src/images/${o.list[0].weather[0].icon}@2x.png`,document.querySelector(".current-location").textContent=o.city.name,document.querySelector(".population").textContent=` ${o.city.population} Hab.`;let a=document.querySelector(".current-temperature");a.textContent=Math.round(o.list[0].main.temp);let r=document.createElement("SUB");r.classList.add("text-gray-semibold"),r.textContent="°C",document.querySelector(".current-phenomenom-atmospheric").textContent=o.list[0].weather[0].description,document.querySelector(".speed-wind").textContent=`Velocidad del viento: ${o.list[0].wind.speed} Kmh`;let c=moment.unix(o.city.sunset),i=c._d.getHours(),s=c._d.getHours(),u=moment.unix(o.city.sunrise),d=u._d.getHours(),l=u._d.getHours();document.querySelector(".sunrise").textContent=`${d<10?"0"+d:d}:${l<10?"0"+l:l}`,document.querySelector(".sunset").textContent=`${i<10?"0"+i:i}:${s<10?"0"+s:s}`,a.insertAdjacentElement("beforeend",r);let m,p=new Date;switch(p.getUTCDate){case 1:m=Lunes;break;case 2:m=Martes;break;case 3:m=Miércoles;break;case 4:m=Jueves;break;case 5:m=Viernes;break;case 6:m=Sábado;break;case 7:m=Domingo}if(document.querySelector(".date").textContent=`${m}, ${p.toLocaleDateString()}`,!n.ok)throw{status:n.status,statusText:n.statusText};forecastCity(o)}catch(t){let e=t.statusText||"Ocurrio un error";document.querySelector(".content").insertAdjacentHTML("afterend",`<p><b>Error ${t.status} ${e}</b></p>`)}}
//# sourceMappingURL=bundle.js.map
